query GetProducts {
  products {
    sale
    id
    name
    slug
    orientation
    whiteFrame
    variants(orderBy: price_ASC, first: 1) {
      price
      width
      height
    }
    images(first: 1) {
      id
      alt
      url
    }
  }
}

query GetProductsSlugs {
  products {
    slug
  }
}

query GetProductBySlug($slug: String) {
  product(where: { slug: $slug }) {
    ...ProductDetails
  }
}

query GetCategories {
  categories {
    name
    slug
  }
}

mutation CreateAccount($email: String!, $password: String!) {
  createAccount(
    data: {
      email: $email
      password: $password
      discountCode: {
        create: { DiscountCode: { code: "START15", used: false, discount: 15 } }
      }
    }
  ) {
    email
    id
  }
}

query GetDiscountCodes($code: String!, $email: String!) {
  discountCodes(
    where: {
      code_contains: $code
      used: false
      accounts_some: { email: $email }
    }
    stage: DRAFT
  ) {
    code
    discount
    used
  }
}

query GetAccountByEmail($email: String!) {
  account(where: { email: $email }, stage: DRAFT) {
    id
    email
    password
  }
}

mutation CreateReviewProduct($review: ReviewCreateInput!) {
  createReview(data: $review) {
    id
    stage
  }
}

query GetProductReviewsBySlug($slug: String!) {
  product(where: { slug: $slug }, stage: DRAFT) {
    reviews {
      id
      email
      rating
      content
      name
    }
  }
}

query GetProductsByCategory($categorySlug: String!) {
  products(where: { categories_some: { slug: $categorySlug } }) {
    whiteFrame
    name
    slug
    orientation
    images(first: 1) {
      id
      alt
      url
    }
    id
    variants(orderBy: price_ASC, first: 1) {
      id
      price
      width
      height
    }
    categories(where: { slug: $categorySlug }) {
      name
    }
  }
}

query GetProductsByIds($productsId: [ID!]!) {
  products(where: { id_in: $productsId }) {
    id
    variants {
      id
      price
      width
      height
    }
  }
}

query GetProducts {
  products {
    sale
    id
    name
    slug
    orientation
    whiteFrame
    variants(orderBy: price_ASC, first: 1) {
      price
      width
      height
    }
    images(first: 1) {
      id
      alt
      url
    }
  }
}

query GetProductsSlugs {
  products {
    slug
  }
}

query GetProductDetailsBySlug($slug: String) {
  product(where: { slug: $slug }) {
    id
    name
    description
    paperWeight
    orientation
    color
    sale
    whiteFrame
    paperWeight
    finish
    categories {
      name
    }
    variants {
      ... on ProductVariantType {
        id
        price
        width
        height
      }
    }
    images {
      url
      alt
    }
  }
}

query GetCategories {
  categories {
    name
    slug
  }
}

mutation CreateAccount($email: String!, $password: String!) {
  createAccount(
    data: {
      email: $email
      password: $password
      discountCode: {
        create: { DiscountCode: { code: "START15", used: false, discount: 15 } }
      }
    }
  ) {
    email
    id
  }
}

query GetDiscountCodes($code: String!, $email: String!) {
  discountCodes(
    where: {
      code_contains: $code
      used: false
      accounts_some: { email: $email }
    }
    stage: DRAFT
  ) {
    code
    discount
    used
  }
}

query GetAccountByEmail($email: String!) {
  account(where: { email: $email }, stage: DRAFT) {
    id
    email
    password
  }
}

mutation CreateReviewProduct($review: ReviewCreateInput!) {
  createReview(data: $review) {
    id
    stage
  }
}

query GetProductReviewsBySlug($slug: String!) {
  product(where: { slug: $slug }, stage: DRAFT) {
    reviews {
      id
      email
      rating
      content
      name
    }
  }
}

query GetProductsByCategory($categorySlug: String!) {
  products(where: { categories_some: { slug: $categorySlug } }) {
    whiteFrame
    name
    slug
    orientation
    images(first: 1) {
      id
      alt
      url
    }
    id
    variants(orderBy: price_ASC, first: 1) {
      id
      price
      width
      height
    }
    categories(where: { slug: $categorySlug }) {
      name
    }
  }
}

# type ConnectProduct {
#   id: String!,
# }
# mutation CreateOrder($email:String!, productsId:[ConnectProduct]!) {
#   createOrder(
#     data: {email: "adam@gmail.com", total: 10, stripeCheckoutId: "dddd", orderItems: {create: {product: {connect: $productsId}, quantity: 10, total: 10}}}
#   ) {
#     id
#   }
# }

# mutation CreateOrder {
#   createOrder(
#     data: {email: "adam@gmail.com", total: 10, stripeCheckoutId: "dddd", orderItems: {create: {product: {connect: {id: "clhazkwoebsa10buju6tjnrtx"}}, quantity: 10, total: 10}}}
#   ) {
#     id
#     orderItems {
#       product {
#         variants {
#           id
#           price
#         }
#       }
#     }
#   }
# }
# # clhb3nx1818ek0bumujehqzkr

query GetVariantsByIds($variants: [ID!]!) {
  productVariantTypes(where: { id_in: $variants }) {
    price
    id
  }
}
